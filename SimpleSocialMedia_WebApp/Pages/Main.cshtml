@page
@model SimpleSocialMedia_WebApp.Pages.MainModel
@{
    ViewData["title"] = "SimpleSocialMedia";
}

<div class="w-100 d-flex justify-content-center my-3">
    <a href="/CreatePost" class="btn btn-primary">Create Post</a>
</div>


<ul>
    @foreach(var post in Model.Posts)
    {
        <li class="d-flex justify-content-center flex-wrap text-center mb-3 bg-dark w-75 mx-auto text-white rounded p-3">
            <p class="w-100">@post.Text</p>
            <p class="w-100">Likes: @post.Likes</p>
            <form method="post" class="mx-auto" class="d-flex justify-content-center">
                <input type="text" asp-for="PostID" value="@post.PostID" class="invisible width-0">
                <input type="submit" asp-page-handler="LikePost" value="Like">
                <input type="text" asp-for="CommentText">
                <input type="submit" asp-page-handler="Comment" value="Comment">
                <input type="submit" asp-page-handler="ViewComment" value="View Comments">
            </form>

            @if (Model.ViewCommentPost == post.PostID) 
            {
                <ul>
                @foreach(var comment in Model.Comments)
                {
                    <li>
                        <p>@comment.Text</p>
                        <p>@comment.Likes</p>
                    </li>
                }
            </ul>
            }
        </li>
    }
</ul>